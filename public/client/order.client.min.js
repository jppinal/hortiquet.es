angular.module("angular-cookie-law",[]);angular.module("angular-cookie-law").value("cookieLawName","_cle").value("cookieLawAccepted","accepted").value("cookieLawDeclined","declined");
angular.module("angular-cookie-law").directive("cookieLawBanner",["$compile","CookieLawService",function(a,b){return{restrict:"EA",replace:!0,scope:{message:"@",acceptText:"@",declineText:"@",policyText:"@",policyURL:"@"},link:function(c,d,f){var g,k,l,m,n,p,q,r,t,u,e,h,v="",w="",x="";c.$watchGroup(["message","acceptText","declineText","policyText","policyURL"],function(){b.isEnabled()||(g=f.message||"We use cookies to track usage and preferences.",k=f.acceptButton||!0,l=f.acceptText||"I Understand",
m=f.declineButton||!1,n=f.declineText||"Disable Cookies",p=f.policyButton||!1,q=f.policyText||"Privacy Policy",r=f.policyUrl||"/privacy-policy/",t=f.policyBlank&&"true"===f.policyBlank?'target="_blank"':"",u=f.expireDays||365,h=new Date,h.setTime(h.getTime()+864E5*u),h=h.toGMTString(),k&&(v='<button class="btn btn-primary cl-accept" ng-click="accept()">'+l+"</button>"),m&&(w=' <a href="" class="cl-disable" ng-click="decline()">'+n+"</a>"),p&&(x=' <a href="'+r+'" class="cl-policy" '+t+">"+q+"</a>"),
e='<div class="cl-banner">',e+='<div class="container"><div class="row">',e+='<div class="col-sm-12">',e+=g,e+="</div>",e+='<div class="col-sm-12">',e+=x,e+=v,e+=w,e+="</div>",e+="</div></div>",e+="</div>",d.html(e),a(d.contents())(c),c.accept=function(){b.accept(h);c.onAccept();d.remove();c.onDismiss()},c.decline=function(){b.decline();c.onDecline()})})},controller:["$rootScope","$scope",function(a,b){b.onAccept=function(){a.$broadcast("cookieLaw.accept")};b.onDismiss=function(){a.$broadcast("cookieLaw.dismiss")};
b.onDecline=function(){a.$broadcast("cookieLaw.decline")}}]}}]);angular.module("angular-cookie-law").directive("cookieLawWait",["CookieLawService",function(a){return{priority:1,terminal:!0,restrict:"EA",replace:!0,template:"<span ng-transclude></span>",transclude:!0,scope:!1,link:function(b,c,d,f,g){function k(){c.html("");g(b,function(a){c.html("");c.append(a)})}a.isEnabled()&&k();b.$on("cookieLaw.accept",function(){k()})}}}]);
angular.module("angular-cookie-law").factory("CookieLawService",["CookieService","cookieLawName","cookieLawAccepted","cookieLawDeclined",function(a,b,c,d){return{accept:function(d){a.set(b,c+";expires="+d)},decline:function(){a.set(b,d)},isEnabled:function(){return a.get(b)===c}}}]);
angular.module("angular-cookie-law").factory("CookieService",function(){return{get:function(a){a:{a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a)){a=d.substring(a.length,d.length);break a}}a=null}return a},set:function(a,b){document.cookie=a+"="+b}}});angular.module("users",[]);angular.module("users").factory("Authentication",[function(){this.user=window.user;return{user:this.user}}]);angular.module("common",[]);angular.module("common").directive("hortiquet",function(){return{restrict:"E",scope:{},template:'<span class="font-hortiquet">Hort<img src="/assets/images/vegetables/carrot.svg" alt="i"/>Quet</span>',transclude:!1}}).directive("hortiquetWhite",function(){return{restrict:"E",scope:{},template:'<span class="font-hortiquet white">Hort<img src="/assets/images/vegetables/carrot-white.svg" alt="i"/>Quet</span>',transclude:!1}});angular.module("home",["ngRoute","users","shopping"]);angular.module("order",["shopping"]);angular.module("shopping",["ngRoute"]);angular.module("product",["ngRoute","users","shopping"]);angular.module("legal",["ngRoute"]);angular.module("shopping").factory("ShoppingFactory",["$rootScope",function(a){var b={};b.cart=new shoppingCart("hortiquetOnlineStore");b.shipping={};b.updateShipping=function(b){this.shipping=b;a.$broadcast("shipping")};return b}]);angular.module("shopping").controller("ShoppingController",["$scope","ShoppingFactory",function(a,b){a.$on("shipping",function(){a.shipping=b.shipping})}]);angular.module("shopping").config(["$routeProvider",function(a){a.when("/",{redirectTo:"/"})}]);angular.module("shopping").factory("ShoppingStepsFactory",["$rootScope",function(a){var b={panes:[],selected:{},select:function(c){angular.forEach(b.panes,function(a){a.selected=!1});c.selected=!0;b.selected=c;a.$broadcast("shopping-steps-select")},addPane:function(c){0===b.panes.length?b.select(c):(c.previous=b.panes[b.panes.length-1],b.panes[b.panes.length-1].next=c);b.panes.push(c);a.$broadcast("shopping-steps-add")},nextPane:function(a){b.select(b.selected.next)},prevPane:function(a){b.select(b.selected.previous)}};
return b}]).controller("ShoppingStepsController",["$scope","ShoppingStepsFactory",function(a,b){a.panes=b.panes=[];a.select=function(a){b.select(a)};this.addPane=function(a){b.addPane(a)};a.$on("shopping-steps-select",function(){a.steps=b.selected.percentage})}]).directive("shoppingSteps",function(){return{restrict:"E",scope:{},templateUrl:"/client/shopping/steps/template.steps.shopping.html",transclude:!1,controller:"ShoppingStepsController"}}).directive("shoppingStep",function(){return{require:"^^shoppingSteps",
restrict:"C",transclude:!0,scope:{name:"=",percentage:"=",icon:"="},link:function(a,b,c,d){d.addPane(a)},template:'<div ng-transclude ng-show="selected"></div>'}});function shoppingCart(a){this.cartName=a;this.clearCart=!1;this.items=[];this.loadItems();var b=this;$(window).unload(function(){b.clearCart&&b.clearItems();b.saveItems();b.clearCart=!1})}shoppingCart.prototype.addItem=function(a){a.quantity=this.toNumber(a.quantity);if(0!=a.quantity){for(var b=!1,c=0;c<this.items.length&&!b;c++){var d=this.items[c];d.sku==a.sku&&(b=!0,d.quantity=this.toNumber(d.quantity+a.quantity),0>=d.quantity&&this.items.splice(c,1))}b||this.items.push(a);this.saveItems()}};
shoppingCart.prototype.checkItem=function(a){a.quantity=this.toNumber(a.quantity);if(0>=a.quantity){for(var b=!1,c=0;c<this.items.length&&!b;c++)this.items[c].sku==a.sku&&(b=!0,this.items.splice(c,1));this.saveItems()}};shoppingCart.prototype.loadItems=function(){var a=null!=localStorage?localStorage[this.cartName+"_items"]:null;if(null!=a&&null!=JSON)try{for(var a=JSON.parse(a),b=0;b<a.length;b++){var c=a[b];null!=c.sku&&this.items.push(c)}}catch(d){}};
shoppingCart.prototype.saveItems=function(){null!=localStorage&&null!=JSON&&(localStorage[this.cartName+"_items"]=JSON.stringify(this.items))};shoppingCart.prototype.getTotalPrice=function(a){for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];if(null==a||d.sku==a)b+=this.toNumber(d.quantity*d.price)}return b};shoppingCart.prototype.getSubtotalPrice=function(a){for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];if(null==a||d.sku==a)b+=this.toNumber(d.quantity*(d.price-d.taxes))}return b};
shoppingCart.prototype.getTotalTaxes=function(a){for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];if(null==a||d.sku==a)b+=this.toNumber(d.quantity*d.taxes)}return b};shoppingCart.prototype.getTotalCount=function(a){for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];if(null==a||d.sku==a)b+=this.toNumber(d.quantity)}return b};shoppingCart.prototype.clearItems=function(){this.items=[];this.saveItems()};shoppingCart.prototype.toNumber=function(a){a*=1;return isNaN(a)?0:a};angular.module("shopping").controller("CartStepController",["$scope","ShoppingFactory","ShoppingStepsFactory",function(a,b,c){a.skuInfo={};a.cart=b.cart;a.next=function(){c.nextPane()}}]).directive("cartStep",function(){return{restrict:"E",transclude:!0,scope:{},templateUrl:"/client/shopping/cart/template.cart.step.html",controller:"CartStepController"}});angular.module("shopping").factory("ProvincesFactory",["$http",function(a){var b=null;return function(){b||(b=a.get("/client/data/shipping.provinces.json"));return b}}]).factory("ShippingCostsFactory",["$http",function(a){return function(){return null}}]).controller("ShippingStepController",["$scope","ShoppingFactory","ProvincesFactory","ShoppingStepsFactory","$http",function(a,b,c,d,f){a.shipping={};a.shipping.name={};a.shipping.address={};a.shipping.contact={};a.shipping.fare={};a.cart=b.cart;c().success(function(b){a.regions=
b.regions});a.next=function(){a.shipping.fare.sku="";a.shippingCost(function(){b.updateShipping(a.shipping);d.nextPane()})};a.previous=function(){b.updateShipping(a.shipping);d.prevPane()};a.selectProvince=function(){var b=void 0;a.shipping.address.postalCode&&(b=a.shipping.address.postalCode.slice(0,2));var c=a.regions.find(function(a){return a.provinces.some(function(a){return a.postalcode===b})});a.shipping.address.province=c?c.provinces.find(function(a){return a.postalcode===b}).name:""};a.shippingCost=
function(b){var c=a.shipping.address.postalCode.slice(0,2);a.shipping.fare={};a.shipping.fare.provider="Envialia";a.shipping.fare.mode="Domicilio";var d={};d.provider=a.shipping.fare.provider;d.mode=a.shipping.fare.mode;d.postalprefix=c;console.log(d);f.post("/shipping-fare",d).then(function(c){console.log(c);a.shipping.fare.sku=c.data.sku;a.shipping.fare.price=c.data.price;a.shipping.fare.taxes=c.data.taxes;a.shipping.fare.total=c.data.price*a.cart.getTotalCount();a.shipping.fare.totaltaxes=c.data.taxes*
a.cart.getTotalCount();b()},function(a){console.log(a)})}}]).directive("shippingStep",function(){return{restrict:"E",transclude:!0,scope:{},templateUrl:"/client/shopping/shipping/template.shipping.step.html",controller:"ShippingStepController"}});angular.module("shopping").controller("ConfirmStepController",["$scope","$http","$location","$window","ShoppingFactory","ShoppingStepsFactory",function(a,b,c,d,f,g){a.cart=f.cart;a.next=function(){g.nextPane()};a.previous=function(){g.prevPane()};a.$on("shipping",function(){a.shipping=f.shipping;console.log(a.shipping)});a.buyItems=function(){shoppingData={cart:{}};shoppingData.cart.name=f.cart.cartName;shoppingData.cart.items=f.cart.items;shoppingData.shipping=f.shipping;console.log("posting data....");
b.post("/paypal-create",shoppingData).then(function(a){console.log(a);d.location.href=a.data.href},function(a){console.log(a)})}}]).directive("confirmStep",function(){return{restrict:"E",transclude:!0,scope:{},templateUrl:"/client/shopping/confirm/template.confirm.step.html",controller:"ConfirmStepController"}});angular.module("order").controller("OrderController",["$scope","ShoppingFactory",function(a,b){a.cart=b.cart;a.cart.clearItems()}]);
